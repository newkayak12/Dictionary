# LoadBalancer
여러 서버나 컴퓨터 자원에 작업을 고르게 분산하여 처리하는 것을 말한다.

1. 장점
- 가용성 (가동 중지 없이 서버 유지 관리, 업그레이드, 장애, 재해 복구 )
- 확장성 ( 한 서버에 트래픽 병목 현상을 방지, 유연하게 서버를 추가할 수 있다. )
- 보안   ( 트래픽 모니터링, 공격 트래픽 분산으로 영향 최소화, 네트워크 방화벽 그룹을 통해서 트래픽 라우팅 가능)
- 성능   ( 로드를 균등하게 배분, 클라이언트 요청을 지리적으로 가까운 서버로 리다이렉션)


2. 알고리즘
   1. 정적 로드 밸런싱
      - 라운드 로빈
      - 가중치 기반 라운드 로빈 (서버마다 가중치를 주고 가중치가 높은 서버에 클라이언트 요청을 먼저 배분)
      - IP Hash (클라이언트 주소를 해싱해서 항상 같은 서버로 접근할 수 있도록 보장)
   2. 동적 로드 밸런싱
      - 최소 연결 방법 ( 활성 연결이 가장 적은 서버를 확인하고 해당 서버로 트래픽을 전송 - 모든 서버가 같은 처리 능력을 가진다고 했을 때)
      - 최소 응답 시간 ( 가장 짧은 응답 시간을 보내는 서버로 트래픽을 할당 - 각 서버의 처리 능력이 다를 때)

## ELB(ElasticLoadBalancer)
AWS 로드밸런싱 제품

- CLB
- ALB
- NLB
- GLB

로 4가지 로드밸런서가 존재한다.


## CLB(ClassicLoadBalancer)
- ELB의 가장 기본적인 형태
- L4 ~ L7까지 로드밸런싱 가능
- deprecated

## ALB(ApplicationLoadBalancer)
애플리케이션 로드 밸런서다. 웹 서비스에 걸리는 부하를 분산해준다. 웹 서비스의 부하를 줄여 안정성과 고가용성을 높인다.
HttpHeader, SSL 세션 ID 같은 요청 컨텐츠를 확인해서 트래픽을 리다이렉션한다.


- 고가용성
- 사용자 인증과 같은 보안 향상
- 다양한 레벨의 부하에 대한 유연한 읍답
- 애플리케이션 모니터링 및 검수
- L7 기반 로드밸런서 지원
- 경로 기반 라우팅을 지원한다.

## NLB(NetworkLoadBalancer)
IP 주소 및 기타 네트워크 정보를 검사해서 트래픽을 최적으로 리다이렉션한다. 애플리케이션 트래픽의 소스를 추적하고 여러 서버에 고정 IP를 할당할 수 있다.
TCP/UDP 요청을 기반으로 트래픽을 분산시킨다.

- 낮은 지연시간
- 정적 IP 주소 제공
- TLS 종료를 지원한다. 이를 통해서 이 뒤로는 평문 트래픽을 전달할 수 있다.
- L4 기반 로드 밸런서

## GWLB(GateWayLoadBalancer)
방화벽, 침입 탐지 및 방지, 심층 패킷 검사 같은 가상 어플라이언스를 배포, 확장할 수 있다.
트래픽이 엔드포인트에 도달하기 전에  검사/ 분석/ 인증/ 로깅할 수 있다.

- on-premise에서 사용되는 네트워크 장비 혹은 보안 장비등의 이미지를 AWS EC2에 올려서 활용할 수 있다.
- 3rdPartySolution을 올려서 활용하는 것이 가능
- FireWall, WebApplicationFirewall 등을 사용할 수 있다.

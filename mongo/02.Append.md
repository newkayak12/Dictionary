

### 다중키 인덱스
필드 값이 배열이고, 이를 인덱스로 잡는 경우를 다중 키 인덱스(multiKey Index)라고 한다. 이렇게 구성하면 인덱스 내의 여러 개의 엔트리가
동일한 도큐먼트를 지시하게 된다. 예를 들어보자.

```mongodb-json
{
    name: "Apple",
    tags: ["iPhone", "iPad", "appleWatch", "visionPro", "macbookPro", "macbookAir"]

}
```

tags에 다중키 인덱스를 잡았다면 여러 개의 인덱스 엔트리가 같은 도큐먼트를 지시하고 있다. 이와 같이 배열 내 요소는 각자 자신만의 엔트리를 가지고 있다.
이렇게 인덱스를 사용할 수 있지만 역시나 비용은 만만치 않다. 


### 해시 인덱스
해시 함수를 통해서 인덱스를 구성하는 경우를 해시 인덱스라고 한다. 

`db.table.createIndex({element:'hashed'})`

와 같이 구성할 수 있다. 해시 인덱스는 원본을 해싱하므로 몇 가지 제약 사항이 있다.

1. $eq 쿼리는 동일하게 동작하지만 범위 쿼리는 지원하지 않는다.(해싱되었으므로 원본 값을 가지고 범위 쿼리는 불가능하다.)
2. 다중 키 해시 인덱스는 허용되지 않는다.
3. 부동소수점은 해시되기 전에 정수로 변환된다.

해시 인덱스는 인덱스의 엔트리가 균등하게 분배된다는 장점이 있다. 


## 관리

### 생성, 삭제

 
- `createIndex()` 로 생성한다. (`db.target.createIndex({indexName:1})`)
- `db.system.indexes.find().pretty()`로 인덱스를 검증할 수 있다.
- deleteIndexes로 삭제할 수 있다. (`db.runCommand({deleteIndexes: "user", index: "zip"})`)
- `dropIndex()`로 삭제할 수 있다. (`db.target.dropIndex("indexName")`)

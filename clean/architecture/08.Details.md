# 세부사항


## 1. DB
- 애플리케이션 내부 데이터의 구조는 시스템 아키텍처에서 중요하다.
- DB는 데이터 모델이 아니다. 따라서 종속될 필요는 없다.
- 따라서 UseCase는 이를 알 필요가 없다. 관여해도 안된다.
- 데이터베이스는 그저 메커니즘이다. 빠르게 넣고 뺴는 것은 중요하지만 저수준의 관심사다.
- 다시 말하지만 중요한 사안은 맞지만 관련될 필요는 없다.

## 2. interface
- 애플리케이션에 접속할 방법이 UI든 web이든 크게 중요하지 않다.
- 그게 도메이이나 UseCase에 더더욱이나 간섭하면 안된다.
- 추상화를 시도하면 해결할 수 있다. 그러나 완벽한 추상화는 어렵다.
- 그래도 최대한 세부 사항을 핵심 업무 로직에서 분리된 경계 바깥에 둬야 한다.

## 3. Framework
- 프레임워크 제작자는 애플리케이션이 프레임워크 강결합해서 에코 시스템을 공고히 하기를 바란다.
- 그러나 프레임워크 개발자가 우리가 만들 것에 대한 관심사와 필요한 부분을 알고 싶어하지 않는다.
- 프레임워크가 의존성 규칙을 위반하는 경향이 있다. 이런 부분도 프레임워크 사용의 위험성이다.
- 또한 애플리케이션이 성숙해지면서 오히려 프레임워크가 방해요소가 되는 경우도 있을 수 있다.
- 마지막으로 프레임워크 지향 방향이 애플리케이션과 맞지 않을 수 있다.
- 결과적으로 강결합이 되도록 두지 않는 것이 좋다. 적당히 거리를 두는 것이 좋다.
- 그래서 도메인 안으로 프레임워크가 침투하지 못하도록 노력해야 하는 것이다.


## 그래서?
- 설계 방식을 정리하면 아래와 같다.
- 아래와 같은 다양한 방법이 있다. 각자 장단점이 있다.
- 어떤 것이 무조건적으로 옳지만은 않다.

### 계층 기반 패키지
- 3가지 레이어로 이뤄진다.
- 바로 아래 계층에만 의존한다.
- 기능이 같은 코드끼리 서로 분리한다.
- SW가 복잡해지면 '뚱뚱해지며' 더 잘게 모듈화를 할지 고민하게 될 것이다.

### 기능 기반 패키지
- DDD의 Aggregate root에 의존해서 나누는 것이다.

### 포트와 어댑터(Hexagonal)
- Hexagonal, BCE(Boundary-Controller-Entity)로 구현하여 세부 구현에 독립적이며 분리된 아키텍쳐를 만든다.

### 컴포넌트 기반 패키지
- 큰 단위의 단일 컴포넌트와 관련된 모든 책임을 하나의 자바 패키지로 묶는 데 주안점을 둔다.
- 서비스 중심적인 시각으로 SW 시스템을 바라본다. MSA의 시선과 유사하다.

## 결론적으로?
- 최적의 설계를 했더라도 구현하면서 고민을 하지 않으면 설계가 독이 될 수 있다.
- 최대한 열어두고 실용적으로 그 상황에 맞는 판단을 하는 것이 중요하다.

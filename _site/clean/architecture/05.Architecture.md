# 아키텍쳐

- 아키텍쳐는 SW와 동떨어진 개념이 아니다.
- 시스템 아키텍쳐란 시스템을 구축했던 사람들이 만들어낸 시스템 형태다.
- 더 나아가 주된 목표는 시스템 생명 주기를 지원하는 것이다.
- 시스템을 쉽게 이해할 수 있게 해주고, 쉽게 개발하며, 쉽게 유지보수하고, 쉽게 배포하게 해준다.
- 궁극적 목표는 시스템의 수명과 관련된 비용은 최소화하고, 생산성을 끌어올리는 데 있다.
- 일종의 제약이며 초기에는 오히려 발목을 잡을 수도 있다. 그러나 시간이 지날수록 진가를 발휘한다.
- 주의를 기울인 아키텍쳐는 유지보수 비용을 대폭 줄일 수도 있다.

- 프로그램은 정책과 세부 사항으로 나뉜다. 
- 세부 사항은 끝까지 열어두고 최대한 종속되지 않아야 할 사항이다.
- 정책은 모든 업무 규칙, 업무 절치를 구체화하는 것이다. 시스템의 가치가 있는 곳이다.
- 아키텍트의 목표는 정책을 공고히 할 수 있게하고 세부 사항은 최대한 미룰 수 있게 하는 것이다.
- 결과적으로 세부사항을 정책으로부터 떼어내고 정채과 세부사항이 혼합되지 않도록 하는 것이다.
- 이를 통해서 정책은 세부사항과 '남'이 되며, 세부사항에 의존하지 않게 된다.

## 독립성
### UseCase
- UseCase는 시스템의 의도를 지원하는 역할을 한다. 
- 아키텍쳐는 행위를 명확하게 하고 외부로 드러내며, 이를 통해서 시스템이 지닌 의도를 아키텍쳐 수준에서 알아볼 수 있게 한다.

### 개발에서는?
- 동시에 개발하더라도 서로 충돌하는 부분을 완화시켜 줄 수 있어야 한다.

### 선택사항 열어 놓기 
- 컴포넌트 구조와 관련된 관심사들 사이에서 균형을 맞추고, 각 관심사를 모두 만족시킬 수 있게 한다.

### 계층 결합 분리
- 단일 책임 원칙, 공통 폐쇄 원칙을 적용하여 의도의 맥락에 따라서 다른 이유로 변경되는 것들은 분리하고, 동일한 이유로 변경되는 것은 묶는다.
- 시스템의 나머지 부분으로부터 분리하여 독립적으로 변경할 수 있도록 한다.

### 중복
- 간혹 중복이라고 합치는 경우가 있다.
- 과연 '의도된 중복'인지 아니면 그냥 중복인지를 구별해야 한다.
- '의도된 중복'은 향후 다른 방향으로 갈 수 있다. 그러나 그냥 중복은 항상 같을 것이다. 같은 이유로 같은 방식으로 변경해야 할 것이다.

### 결론
- 좋은 아키텍쳐라면 상황에 유연하게 대처할 수 있어야 하며, 나중에 반대로 되돌릴 수도 있어야 한다.

## 경계
- 아키텍처는 선을 긋는 기술이다.
- 핵심적인 업무 로직을 오염시키는 것을 방지하는 목적이 있다.
- 또한 세부 사항 결정을 끝까지 미룰 수 있게 해준다.
- 선은 관련이 있는 것과 없는 것 사이에 긋는다.
- 소위 말하는 layer도 선의 일종이 될 수 있다.
- 선과 선 사이는 추상화를 통해서 DIP를 이룩한다.
- 이렇게 구성하다보면 그냥 추상화된 친구를 선언하고 구현체는 바꿔끼우는 pluginArchitecture를 이룩할 수 있다.
- 이와 같이 경계는 변경의 축이 있는 지점에 그어진다.
- 이 경계를 긋는 데 도움이 되는 것은 단일 책임 원칙이다.

## 정책
- SW는 정책을 기술한 것이다.
- 하나의 정책은 이를 구성하는 다수의 정책으로 이뤄질 수 있다.
- SW 아키텍쳐에서는 정책을 신중하게 분리해야 한다. 
- 주로 변경되는 시점에 관심을 두며, 이에 포함되는 정책은 동일 수준에 둔다. 또한 동일 컴포넌트에 속하게 된다.
- 서로 다른 이유, 혹은 다른 시점에 변경되는 정책은 다른 수준에 있으며, 반드시 분리해야만 한다.
- 더 나아가 좋은 아키텍처라면 컴포넌트 연결의 의존성 방향이 컴포넌트 수준 기반으로 만들어져야 한다. 
- 또한 저수준이 고수준에 의존해야 한다.

## 수준
- 입·출력까지의 거리다.
- 시스템의 입, 출력 모두로부터 멀리 위치할수록 정책의 수준이 높아진다.
- 고수준의 정책, 즉 입력과 출력에서부터 멀리 떨어진 정책은 저수준 정책에 비해서 덜 빈변하게 변경되고 보다 중요한 이유로 변경되는 경향이 있다.
- 저수준의 정책, 즉 입력과 출력에 가까이 위치한 정책은 더 빈번하게 변경되며, 보다 긴급성을 요하며, 덜 중요한 이유로 변경되는 경향이 있다.

## 업무 규칙
- 사업 자체에 핵심적이며, 규칙을 자동화하는 시스템이 없더라도 있는 규칙을 핵심 업무 규칙이라고 한다.
- 핵심 업무 규칙은 보통 데이터를 필요로 한다. 이러한 핵심 규칙과 핵심 데이터는 본질적으로 결합되어 있으며 entity라고 부른다. 
- entity는 외부 요인, 예를 들어 DB, UI, framework에 의해서 오염되어서는 안된다. 
- UseCase는 자동화된 시스템의 동작을 정의하고 제약함으로써 수익을 얻거나 비용을 줄이는 업무 규칙을 의미한다.
- 자동화된 시스템 요소로 존재해야만 의미가 있다.
- UseCase는 애플리케이션에 특화된 업무 규칙을 설명한다.
- Entity는 UseCase에 대해서 알 필요가 없다. 반대는 잘 알고, 이를 이용해야 한다.
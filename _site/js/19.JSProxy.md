# JavaScript Proxy

ProxyëŠ” ëŒ€ë¦¬ìë¥¼ ì˜ë¯¸í•œë‹¤.

## Proxy ë“±ë¡
```javascript
// ëŒ€ìƒ ê°ì²´(Real Subject)
let target = { ... }

// targetì˜ ë™ì‘ì„ ê°€ë¡œì±„ì–´ ì œì–´í•˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ë©”ì„œë“œ ë‚´ë¶€ë¥¼ êµ¬í˜„í•œ í•¸ë“¤ëŸ¬
let handler = {
    get(target, prop) { ... },
    set(target, prop, value) { ... },
    has(target, prop) { ... },
    ...
}

// í”„ë¡ì‹œ ìƒì„± ë° ë“±ë¡
const proxy = new Proxy(target, handler)

// target : Proxy ëŒ€ìƒ
// handler : targetì˜ ë™ì‘ì„ ì œì–´

```
handler ê°ì²´ë¥¼ ë³´ë©´, get, set, has ..ë“± ë©”ì„œë“œë¥¼ ì •ì˜í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, 
ì´ ë©”ì„œë“œë“¤ì€ target ê°ì²´ì˜ ë™ì‘ì„ ì¤‘ê°„ì— ê°€ë¡œì±„ì„œ ì œì–´ ë¡œì§ì„ ê°€ë¯¸í•˜ê²Œ í•˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ë©”ì„œë“œë“¤ì´ë‹¤. ê·¸ë˜ì„œ ì´ ë©”ì„œë“œë“¤ì„ íŠ¸ë©(trap) ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

í”„ë¡ì‹œ ì˜ˆì‹œ
```javascript
// ëŒ€ìƒ ê°ì²´ (target)
const user = {
    firstName: 'John',
    lastName: 'Doe',
    email: 'john.doe@example.com',
}

// í•¸ë“¤ëŸ¬ (handler)
const handler = {
	// ëŒ€ìƒ ê°ì²´ì— í”„ë¡œí¼í‹° ê°’ì„ í• ë‹¹í•˜ë ¤ëŠ” ë™ì‘(get)ì„ ê°€ë¡œì±„ì–´ ì‹¤í–‰
    get(target, property) {
        console.log(`Property ${property} has been read.`);
        return target[property];
    }
}

const proxyUser = new Proxy(user, handler);

console.log(proxyUser.firstName);
console.log(proxyUser.lastName);
```
í´ë¼ì´ì–¸íŠ¸ëŠ” í”„ë¡ì‹œ ê°ì²´ì¸ proxyUserì— ì ‘ê·¼í•´ì•¼ í•œë‹¤. í”„ë¡ì‹œ ê°ì²´ê°€ userë¥¼ ê°ì‹¸ê³  ìˆëŠ” í˜•íƒœê¸° ë•Œë¬¸ì´ë‹¤.
ì´ì²˜ëŸ¼ Proxy ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ì‘ì—… (ì†ì„± ì¡°íšŒ, í• ë‹¹, ì—´ê±°, í•¨ìˆ˜ í˜¸ì¶œ ë“±)ì— ëŒ€í•œ ì‚¬ìš©ì ì§€ì • ë™ì‘ì„ ê°€ë¡œì±„ê³  ì¶”ê°€ ì¬ì •ì˜ í•  ìˆ˜ ìˆë‹¤. 


# Proxy íŠ¸ë© í•¸ë“¤ëŸ¬ ì¢…ë¥˜
|Property ê°€ë¡œì±„ëŠ” íŠ¸ë©	|ì‘ë™ ì‹œì |                               íŠ¹ì´ì                                 |
|:----:|:-----:|:----------------------------------------------------------------:|
|get | í”„ë¡œí¼í‹°ë¥¼ ì½ì„ ë•Œ|                                                                  |
|set | í”„ë¡œí„°í‹°ì— ê°’ì„ ì“¸ ë•Œ|              ê°’ì„ ì“°ëŠ”ê²Œ ì„±ê³µí•˜ë©´ true, ì•„ë‹ˆë©´ falseë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.               |
|has | in ì—°ì‚°ìê°€ ì‘ë™í•  ë•Œ|                         in ì—°ì‚°ìê°€ ì‘ë™í•  ë•Œ ë°˜ì‘                         |
|deleteProperty | delete ì—°ì‚°ìê°€ ì‘ë™í•  ë•Œ| ëŒ€ìƒ ê°ì²´ í”„ë¡œí¼í‹° ì‚­ì œ ì‹œ ë°˜ì‘ <br/> ê°’ì„ ì‚­ì œí•˜ëŠ”ê²Œ ì„±ê³µí•˜ë©´ true, ì•„ë‹ˆë©´ falseë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤. |       |

|Method ê°€ë¡œì±„ëŠ” íŠ¸ë©|	ì‘ë™ ì‹œì |
|:----:|:-----:|
|apply |í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ|
|constructor |new ì—°ì‚°ìê°€ ì‘ë™í•  ë•Œ|

|      Object ê°€ë¡œì±„ëŠ” íŠ¸ë©      |                                  	ì‘ë™ ì‹œì                                    |
|:------------------------:|:-------------------------------------------------------------------------:|
|      getPrototypeOf      |                        Object.getPrototypeOf ì‘ë™í•  ë•Œ                        |
|      setPrototypeOf      |                        Object.setPrototypeOf ì‘ë™í•  ë•Œ                        |
|       isExtensible       |                         Object.isExtensible ì‘ë™í•  ë•Œ                         |
|    preventExtensions     |                      Object.preventExtensions ì‘ë™í•  ë•Œ                       |
| getOwnPropertyDescriptor |                   Object.getOwnPropertyDescriptor ì‘ë™í•  ë•Œ                   |
|         ownKeys          | Object.getOwnPropertyNames ì‘ë™í•  ë•Œ <br/> Object.getOwnPropertySymbols ì‘ë™í•  ë•Œ |

# Proxy í•´ì œ
ì“¸ëª¨ ì—†ì–´ì§„ í”„ë¡ì‹œë¥¼ í•´ì œí•˜ì—¬ ë©”ëª¨ë¦¬ ì¸¡ë©´ì—ì„œ ì—¬ìœ  ê³µê°„ì„ ì–»ê³  ì‹¶ìœ¼ë©´?
ëª…ì‹œì ìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì œê±°í•´ì•¼ í•œë‹¤.

í”„ë¡ì‹œë¥¼ í•´ì§€í•˜ê²Œ ìœ„í•´ì„œëŠ” ì²˜ìŒë¶€í„° <strong>ì·¨ì†Œ ê°€ëŠ¥í•œ í”„ë¡ì‹œ (Revocable Proxy)</strong>ë¡œ ì •ì˜í•  í•„ìš”ê°€ ìˆë‹¤.
`Proxy.revocable()`ë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” revokeë¥¼ ì´ìš©í•´ì„œ Targetì„ ì°¸ì¡°í•˜ë˜ Proxyë¥¼ í•´ì œí•  ìˆ˜ ìˆë‹¤. 


# Javascript Reflect ê°ì²´
JSì—ì„œë„ Reflectionì´ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `Object.keys()`, `Object.getOwnPropertyDescriptor()` ë° prototypeê³¼ ê°™ì€ Objectê°€ ê³ ì „ì ì¸ ë¦¬í”Œë ‰ì…˜ì´ë‹¤.
ì´í›„ ES6ë¶€í„° `Reflection`ì´ ì¶”ê°€ëë‹¤. 

|Reflect í•¸ë“¤ëŸ¬	|ë‚´ë¶€ ì‘ë™ ë°©ì‹|
|:-----:|:-----------:|
|Reflect.get()|ì†ì„± ê°’ì„ ë°˜í™˜ <br/>obj[prop] í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ìŒ|
|Reflect.set()|ì†ì„± ê°’ì„ í• ë‹¹í•˜ë©´ true ë°˜í™˜ <br/>obj[prop] = value í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ìŒ|
|Reflect.has()|ì†ì„±(ì†Œìœ  ë˜ëŠ” ìƒì†)ì´ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¶€ìš¸ì„ ë°˜í™˜|
|Reflect.deleteProperty()|ì†ì„± ê°’ì„ ì‚­ì œ <br/>delete obj[prop] í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ìŒ|
|Reflect.construct()| ìƒì„±ì í˜¸ì¶œ|
|Reflect.apply()| ì§€ì •ëœ ì¸ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ|
|Reflect.defineProperty()| ì†ì„±ì´ ê°œì²´ì— ìˆìœ¼ë©´ ì†ì„±ì˜ ì†ì„± ì„¤ëª…ìë¥¼ ë°˜í™˜í•˜ê³  ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì •ì˜ë˜ì§€ ì•Šì€ ì†ì„±ì„ ë°˜í™˜|
|Reflect.getOwnPropertyDescriptor()| Object.getOwnPropertyDescriptor() ì™€ ê°™ìŒ|
|Reflect.getPrototypeOf()| Object.getPrototypeOf() ì™€ ê°™ìŒ|
|Reflect.isExtensible()|Object.isExtensible() ì™€ ê°™ìŒ|
|Reflect.ownKeys()|ê°ì²´ì˜ ì†Œìœ  ì†ì„± í‚¤(ìƒì†ë˜ì§€ ì•ŠìŒ)ì˜ ë°°ì—´ì„ ë°˜í™˜|
|Reflect.preventExtensions()| Object.preventExtensions() ì™€ ê°™ìŒ|
|Reflect.setPrototypeOf()| ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…ì„ ì„¤ì •|

## .get()
```javascript
const obj = { a: 1, b: 'zero', c: true };
const arr = [1, 'zero', true];

Reflect.get(obj, 'a'); // 1
Reflect.get(arr, 1); // 'zero'
```
## .set()
```javascript
Reflect.set(obj, 'd', ['arg1', 'arg2']); // true ë°˜í™˜

obj.d; // ['arg1', 'arg2']
```

## .has()
```javascript
Reflect.has(obj, 'b'); // true
```

## .apply()
- í•¨ìˆ˜ë¥¼ ì‹¤í–‰
- ë‘ ë²ˆì§¸ ì¸ìëŠ” í•¨ìˆ˜ì˜ thisë¥¼ ë°”ê¾¸ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê±°ë¼ì„œ, ë³´í†µì€ nullì„ ë„£ì–´ì¤€ë‹ˆë‹¤.
- ì„¸ ë²ˆì§¸ ì¸ìëŠ” í•¨ìˆ˜ì— ë„£ì„ ì¸ìì´ë‹¤.
- call, apply, bind ì™€ ì‚¬ìš©ë²•ì´ ë¹„ìŠ·í•˜ë‹¤ê³  ë³´ë©´ ëœë‹¤.

```javascript
const add = (a, b) => a + b;

Reflect.apply(add, null, [3, 5]); // 8
```

## .constructor()
```javascript
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
}

const p = Reflect.construct(Person, ['í™ê¸¸ë™', 55]); // new Person('í™ê¸¸ë™', 55)
```

## .ownKeys
- ê°ì²´ì˜ ì†ì„±ëª…ë“¤ì„ ë°°ì—´ë¡œ ë°˜í™˜
- ë‹¨, ìƒì†ë°›ì€ ì†ì„±ê³¼ enumerableí•˜ì§€ ì•Šì€ ê²ƒì€ ì œì™¸
```javascript
const duck = {
  name: 'Maurice',
  color: 'white',
  greeting: function() {
    console.log(`Quaaaack! My name is ${this.name}`);
  }
}

Reflect.ownKeys(duck); // [ "name", "color", "greeting" ]
```

<cite> https://inpa.tistory.com/entry/JS-ğŸ“š-ìë°”ìŠ¤í¬ë¦½íŠ¸-Proxy-Reflect-ê³ ê¸‰-ê¸°ë²• </cite>
# Binary
ì´ì§„ ë°ì´í„°

# Base64
Binaryë¥¼ ì¸ì½”ë”©í•´ì„œ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (ì¸ì½”ë”©í•˜ë©´ ìš©ëŸ‰ì´ 33% ì»¤ì§„ë‹¤.)

# Blob(Binary Large Object)
Blobì€ ì´ë¯¸ì§€, ì˜¤ë””ì˜¤, ë¹„ë””ì˜¤ ë“±ì„ ë°”ì´ë„ˆë¦¬ ê°ì²´ í˜•íƒœë¡œ ì €ì¥í•œ ê²ƒ
(Base64ëŠ” String, Blobì€ Object)

## Blob ì‚¬ìš©
### 1.blob -> ObjectURL
`<a>`, `<img>`ì˜ srcì„ ìœ„í•´ì„œëŠ” url íƒ€ì…ìœ¼ë¡œ ë”°ë¡œ ë³€í™˜ì„ í•´ì•¼í•œë‹¤.
```javascript
<img src="" alt="" style="width:150px; display: block;"> 
<a download="img.jpg" href="#">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</a>

<script>
    fetch('https://www.business2community.com/wp-content/uploads/2014/04/Free.jpg')
      .then((response) => response.blob())
      .then((blob) => {
        const url = URL.createObjectURL(blob);
        document.querySelector('img').src = url;
        document.querySelector('a').href = url;
      });
</script>
```
ì´ë ‡ê²Œ ë³€í™˜ëœ URLì€ ë¸Œë¼ìš°ì € ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ê³ , ë©”ëª¨ë¦¬ ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ëª…ì‹œì ìœ¼ë¡œ í•´ë‹¹ URLì´ í•´ì œë˜ê¸° ì „ê¹Œì§€ GCê°€ ì´ë¤„ì§€ì§€ ì•ŠëŠ”ë‹¤.
ë”°ë¼ì„œ ëª…ì‹œì ìœ¼ë¡œ í•´ì œí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
````javascript
// Create Blob URL
const objectURL = window.URL.createObjectURL(blob);

// Revoke Blob URL after DOM updates..
window.URL.revokeObjectURL(objectURL);
````

### 2. blob -> Base64
ì´ëŸ¬í•œ urlë¥¼ `data url`ì´ë¼ê³  ë¶€ë¥¸ë‹¤. 
```javascript
fetch('https://play-lh.googleusercontent.com/hYdIazwJBlPhmN74Yz3m_jU9nA6t02U7ZARfKunt6dauUAB6O3nLHp0v5ypisNt9OJk')
    .then((res) => res.blob())
    .then((blob) => {
        const reader = new FileReader();
        reader.onload = () => {
            const base64data = reader.result;
            console.log(base64data)
        }
        reader.readAsDataURL(blob);
    })
```

# ArrayBuffer
ArrayBuffer ê°ì²´ëŠ” ì´ë¯¸ì§€, ì˜ìƒ ê°™ì€ ë©€í‹°ë¯¸ë””ì–´ ë°ì´í„° ë©ì–´ë¦¬ë¥¼ í‘œì¤€ JSì—ì„œ ë‹¤ë£¨ê¸° ìœ„í•´ì„œ ë„ì…ëë‹¤. 
ArrayBufferëŠ” ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ì§ì ‘ ë‹¤ë£¨ëŠ” ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©ë˜ë©° ì´ëŠ” ê°œë°œìê°€ ë©”ëª¨ë¦¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. 
ArrayBufferëŠ” ë³´ë‹¤ ì˜¤ë¦¬ì§€ë„ì— ê°€ê¹ë‹¤.(base64, blobì— ë¹„í•´ì„œ)

ì¼ë°˜ì ìœ¼ë¡œ ArraybufferëŠ” `view`ë¼ëŠ” ê°ì²´ë¥¼ ë”°ë¡œ ìƒì„±í•´ì„œ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. viewëŠ” ìê¸° ìŠ¤ìŠ¤ë¡œëŠ” ì–´ë– í•œ ë°ì´í„°ë„ ì €ì¥í•˜ì§€ ì•Šê³  ArrayBufferë¥¼ ë“¤ì—¬ë‹¤ë³´ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì“´ë‹¤.
- Uint8Array : ìˆ«ì 8ì€ ë¹„íŠ¸ë¥¼ ì˜ë¯¸í•˜ê³  8ë¹„íŠ¸ = 1ë°”ì´íŠ¸ì´ê¸° ë•Œë¬¸ì— ê° ë°”ì´íŠ¸ë³„ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. 1ë°”ì´íŠ¸ í¬ê¸°ì´ê¸° ë•Œë¬¸ì— 0 - 255 ë²”ìœ„ì˜ ìˆ˜ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤. (Uint8ì˜ ì˜ë¯¸ëŠ” Unsigned 8bit Intì™€ë„ ê°™ë‹¤)
- Uint16Array : 2ë°”ì´íŠ¸(16ë¹„íŠ¸) ë‹¨ìœ„ ì •ìˆ˜í˜•ìœ¼ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•œ view ê°ì²´ì´ë‹¤. ë”°ë¼ì„œ ë‹¤ë£° ìˆ˜ ìˆëŠ” ë²”ìœ„ëŠ” 0 - 65535ì— í•´ë‹¹í•œë‹¤.
- Uint32Array : 4ë°”ì´íŠ¸(32ë¹„íŠ¸) ë‹¨ìœ„ ì •ìˆ˜í˜•ìœ¼ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•œ view ê°ì²´ì´ë‹¤. ë”°ë¼ì„œ ë‹¤ë£° ìˆ˜ ìˆëŠ” ë²”ìœ„ëŠ” 0 - 4294967295ì— í•´ë‹¹í•œë‹¤.
- Float64Array : 8ë°”ì´íŠ¸(64ë¹„íŠ¸) ë‹¨ìœ„ë¡œ ë¶€ë™ ì†Œìˆ˜ì  ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•œ view ê°ì²´ì´ë‹¤. ë‹¤ë£° ìˆ˜ ìˆëŠ” ë²”ìœ„ëŠ” 5.0x10^-324 ë¶€í„° 1.8x10^308 ê¹Œì§€ì´ë‹¤.


## Base64 -> ArrayBuffer -> Blob
```javascript
// bas64ë¥¼ blobìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” í•¨ìˆ˜
function b64toBlob(b64Data, contentType = '', sliceSize = 512) {
   const image_data = atob(b64Data.split(',')[1]); // data:image/gif;base64 í•„ìš”ì—†ìœ¼ë‹ˆ ë–¼ì£¼ê³ , base64 ì¸ì½”ë”©ì„ í’€ì–´ì¤€ë‹¤

   const arraybuffer = new ArrayBuffer(image_data.length);
   const view = new Uint8Array(arraybuffer);

   for (let i = 0; i < image_data.length; i++) {
      view[i] = image_data.charCodeAt(i) & 0xff;
      // charCodeAt() ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ì¸ë±ìŠ¤ì— ëŒ€í•œ UTF-16 ì½”ë“œë¥¼ ë‚˜íƒ€ë‚´ëŠ” 0ë¶€í„° 65535 ì‚¬ì´ì˜ ì •ìˆ˜ë¥¼ ë°˜í™˜
      // ë¹„íŠ¸ì—°ì‚°ì & ì™€ 0xff(255) ê°’ì€ ìˆ«ìë¥¼ ì–‘ìˆ˜ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ì„¤ì •
   }

   return new Blob([arraybuffer], { type: contentType });
}

const contentType = 'image/png';
const b64Data =
   'data:image/gif;base64,R0lGODlhAAEAAcQAALe9v9ve3/b393mDiJScoO3u74KMkMnNz4uUmKatsOTm552kqK+1uNLW18DFx3B7gP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjAxODAxMTc0MDcyMDY4MTE5QjEwQjYyNTc4MkUxRURBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEzN0VEMDZBQjMyNzExRTE4REMzRUZGMkFCOTM1NkZBIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEzN0VEMDY5QjMyNzExRTE4REMzRUZGMkFCOTM1NkZBIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDI4MDExNzQwNzIwNjgxMTlCMTBCNjI1NzgyRTFFREEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTlCMTBCNjI1NzgyRTFFREEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQAAAAAACwAAAAAAAEAAQAF/yAkjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpvP6LR6zW673/C4fE6v2+/4vH7P7/v/gIGCg4SFhoeIiYptBQEADAQED5OUlQ8DkQwAAQKLni0KDgsDlqWmpQYLDgqfrSINCQans7SWBgkNrogFDKS1v8APBgwFuoIBksHKwQsBxn3Iy9LKBM7PdwXJ09vAC8XXcwDc48EDAOBwCgjk7MAI3+hqB77t9bMDufFoDPb9tef6yiTwR3BWgoBiBKwryLDUQYRftDWcOOkhxC0DKWqseFGLuI0gHXS80gCkyQfWRv9KKUDvJMUBnVRGkeiS4gKZUA7UPJkP5xIBLXdSNOCTyUehIAEWPQIUqUmYS48cdbrxQFQjsqiCJHp1SEmtJlN2/ZER7EaLY30ENdtwQNofAdiaZPWWx1S5E0XW3UETL8Obe3Ws9UuQa+AbAghvPIwjrmKKYhnLcPy4YWTJMBxUntgTc4y7m/sp9QwDdOh6o0m7MH2aXWrVLFi3HmcV9ouvs+1dtp2Ccu52u3mfKPDbXkzhLIrXQ+5ioXJuBJi34PecGwPpLHRW39YZ+4nE26cd947CeXhg0cmr0Hw+WG31JQQ4AFC2fS1NB8aTVzDY/q8BdJHXlH/bQEUeewRuo5f/d30lGEx63jnIjVvkSciNehZug2GG0mzIoTIefgiMelmJWAuE2DVooiUoSkfdirO8hpx2MJ7yHnYK1DgLPN71B6Nh5NWn4yTXwefbkA8ESCKSkyAA3wg0DnkjfCXW6OSTIxy5YnBB6lgkliMoBCMC+oHJkolkgjmceRKmqeZ3APi4nTlvriDAAQCo+BsBADRQZp0o4LYdl4CiIOdpQBY6XXhfKgpKeDw6ygKbubUo6QpR/jblpSscqliinK4gW2UyhooCcb8ZaGoLQoaG1qoroDpbpLCq0Opjr9aqgqyh0aprCrf6Veqv33lKlarExrbZgsm2UCVeVzbrgpZsESqt/wkLEJbrtSqMihSz3K5ArVbWhjsCr2z9ae4JhK3bHF6WunuCnkIBJq8KL5o17L0ieFvTvvz661J3/JYwLlLlynuwUAm7u/BODa/7cE0RmzuxSxWHe/FJGXO7cVgFp5ApuSGjIPBJAN8bLFKNljzCs1pF67II6JqlbsCEgRvygHghW7CYirlZsDqbvVNwA8ZqhY+8BWSb2wI36xqncnRKewDMvxmwqalX+1cNrF07+PWlYWeodaHyYW2hAQ5EjRwvSSc4ADHqBeA0k5Qk0PFYd6qNt9Zuv6VAAnEPOUACSu51J6V4/0LA1lENXnjjlhyeOE6LU24PAvnhFMDKmo9z+P/euzjgd+j1sO2rKw3cjfpGCxC8CNyv72QAAKsTUgDotYOUQO6AnNz7RinrUQDjwyMlNCD8Jd/z5XsEMLnzGwH4x8fUu2Q9H81nT9j2eZzpvWI+0wH0+EHnwTv6WrUsh6DsK0Z6GDzH/2ng+9gfWvFm1Ky/XwMAHhrW9z+t8G8M4ClgZconDwWGBnJocJ0DCWOvNkxwMxRixAU3g78wYG+DFHOD8EBYE53lj4SEOWBEUEiYeJ3hdCwUiszUEMN2sSFHNcSLAMMAvxySbA0j9KFGVMgFAgoRJO4zA72OeBIXkmF6TCwIqMqQwChSZQ0ftCJD5leFkWmxJrIbQxC/SBD/ImZBgmR0ybbGsMQ0TsSJYXAjUjLYPzkipYNayKId68FFKSBojyeB4BfGCEjXoKGNhfRHBcmAvEQyBI5ecKRLzoBDSYJkh3m0JMjKQEhNTsOEX8iXJxtiRiogcpTkgOQWYIhKdswwjq2kSBn0GEtlQK8LPaxlP/rYhE7q8heljMIff9kPUHLBf8RkByaxgMZkjmOR9GOlM39hADxigWjT5AYCbkm/ZmazFlBjA9K+CYyluUEAUyOnKcxhzYSYTp2UYFs7zdA6csaOD3fypicX0DlACAAW0iTjLfxUugUENIepcMAyBVGAA0DCigRgwAEWqggF4IkAB82eAfh0AG5eaCQAeFrAKSlHgAUA4AC8DIgAAtCAR0QCb5noEyfgo4AAOMKlBGhkaxAQ000EwKOSqqlN8QSAooo0EpHQKTl4itSSFrWoKLUpUGdG1apa9apYzapWt8rVrnr1q2ANq1jHStaymvWseggBADs=';

const blob = b64toBlob(b64Data, contentType); // base64 -> blob
const blobUrl = URL.createObjectURL(blob); // object url ìƒì„±

const img = document.createElement('img');
img.src = blobUrl;
document.body.appendChild(img);
```

## Blob -> ArrayBuffer
```javascript
let fileReader = new FileReader();

fileReader.readAsArrayBuffer(blob); // ArrauBuffer í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì½ì–´ ë³€í™˜

fileReader.onload = function(event) {
  let arrayBuffer = fileReader.result;
};
```

# FileReader
FileReaderëŠ” Blob, Fileê³¼ ê°™ì€ ê°ì²´ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì–´ ë“¤ì´ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê°ì²´

```javascript
const reader = new FileReader();

reader.readAsArrayBuffer(blob) // ArrauBuffer í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì½ì–´ ë³€í™˜
/**
 * eadAsArrayBufferì˜ ê²½ìš° ë°”ì´ë„ˆë¦¬ íŒŒì¼ ëŒ€ìƒìœ¼ë¡œ ë¡œìš° ë ˆë²¨ì˜ ë°”ì´ë„ˆë¦¬ ì‘ì—…ì´ í•„ìš”í•œ ê²½ìš°ì— ìœ ìš©í•˜ë‹¤.
 * ëŒ€ë¶€ë¶„ í•˜ì´ë ˆë²¨ì—ì„œ í•˜ëŠ” ì‘ì—…ì˜ ê²½ìš°ì—” File ê°ì²´ê°€ Blobì„ ìƒì†ë°›ê³  ìˆê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ì½ê¸° ê³¼ì •ì—†ì´ ì¦‰ê°ì ìœ¼ë¡œ slice ë“±ì˜ ë©”ì„œë“œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.
 */

reader.readAsText(blob, [encoding]) // encoding ë°©ì‹ì— ë§ê²Œ í…ìŠ¤íŠ¸ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì½ì–´ ë³€í™˜ (ê¸°ë³¸ ì¸ì½”ë”© ë°©ì‹ - utf-8)
/**
 * readAsTextì˜ ê²½ìš° í…ìŠ¤íŠ¸ í˜•íƒœì˜ ë¬¸ìì—´ì´ í•„ìš”í•œ ê²½ìš° ìœ ìš©í•˜ë‹¤.
 */

reader.readAsDataURL(blob) // base64 í˜•íƒœì˜ data urlë¡œ ë°ì´í„°ë¥¼ ì½ì–´ ë³€í™˜
/**
 * readAsDataURLì˜ ê²½ìš° img íƒœê·¸ì™€ ê°™ì´ src ì†ì„±ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ë£¨ì–´ì•¼ í•˜ëŠ” ê²½ìš° ìœ ìš©í•˜ë‹¤.
 * ë˜ëŠ” ì´ì „ ì±•í„°ì—ì„œ ë‹¤ë£¬ë°”ì™€ ê°™ì´ URL.createObjectURLì„ ì´ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.
 */

const reader = new FileReader();
reader.readAsDataURL(blob) // base64 í˜•íƒœì˜ data urlë¡œ ë°ì´í„°ë¥¼ ì½ì–´ ë³€í™˜

// ë°ì´í„°ë¥¼ ëª¨ë‘ ì½ìœ¼ë©´ onload ì´ë²¤íŠ¸ë¥¼ ë°œìƒ
reader.onload = () => {
    const data = reader.result; // ê²°ê³¼ ì €ì¥
    console.log(data)
}
/**
 * loadstart : ë¡œë”©ì´ ì‹œì‘ë  ë•Œ
 * progress : ì½ê¸°ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆëŠ” ì¤‘
 * load : ì—ëŸ¬ ì—†ì´ ë¦¬ë”©ì´ ì™„ë£Œëœ ë•Œ
 * abort : abort() ë©”ì„œë“œê°€ í˜¸ì¶œëœ ë•Œ
 * error : ì—ëŸ¬ê°€ ë°œìƒí•œ ë•Œ
 * loadend : ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ ìƒê´€ì—†ì´ ë¦¬ë”©ì´ ì™„ë£Œëœ ë•Œ
 * 
 * ë§Œì•½ ì½ê¸°ê°€ ëª¨ë‘ ì™„ë£Œë˜ì—ˆë‹¤ë©´ ê·¸ì— ëŒ€í•œ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡œí¼í‹°ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
 * 
 * reader.result : ì„±ê³µ ì‹œ ì½ì–´ë“¤ì¸ ê²°ê³¼
 * reader.error : ì‹¤íŒ¨ ì‹œ ë°œìƒí•œ ì—ëŸ¬
 * 
 * 
 */
```



<cite>ì¶œì²˜: https://inpa.tistory.com/entry/JS-ğŸ“š-Base64-Blob-ArrayBuffer-File-ë‹¤ë£¨ê¸°-ì •ë§-ì´í•´í•˜ê¸°-ì‰½ê²Œ-ì„¤ëª… [Inpa Dev ğŸ‘¨â€ğŸ’»:í‹°ìŠ¤í† ë¦¬] </cite>
